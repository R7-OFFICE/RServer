# RServer RedOS
## Оглавление

1. [Архитектура](#архитектура)
    - [Общий порядок взаимодействия](#общий-порядок-взаимодействия)
    - [Порядок работы пользователя с документом](#порядок-работы-пользователя-с-документом)
2. [Преимущества](#преимущества)
3. [Технологии](#технологии)
4. [Установка](#установка)
   - [Подтверждение установки](#подтверждение-установки)
6. [Контакты](#контакты)

## Архитектура

### Общий порядок взаимодействия
- **Web**: Веб-сервер для обработки клиентских запросов.
- **Document Server**: Отдельный сервер для редактирования документов.
- **API**: Программный интерфейс для взаимодействия между компонентами.
- **PostgreSQL**: БД для хранения данных документов и пользовательских данных.
- **RabbitMQ**: Брокер сообщений для асинхронного взаимодействия.
- **FileStorage**: REST API для доступа к файловому хранилищу.
- **Service Registry**: Реестр сервисов для управления микросервисами.
- **Search Server BsaSearch**: Поисковый сервер для индексации и поиска.
- **Processing**: Компонент для индексации данных.

### Порядок работы пользователя с документом
1. Пользователь открывает документ в веб-интерфейсе.
2. После проверки прав доступа, пользователю передается ссылка на файл.
3. Доступны два варианта сохранения: при закрытии документа и периодическое сохранение.

## Преимущества

- Горизонтальная масштабируемость
- Отказоустойчивость
- Использование безопасных и современных ОС
- Гибкость технологий
- Stateless архитектура
- Применение принципа CQRS

## Технологии

- **Frontend**: React
- **Backend**: Node.js, .NET Core
- **Database**: PostgreSQL
- **Message Broker**: RabbitMQ
- **Search Engine**: BsaSearch
- **OS**: Astra Linux 1.7, РЕД ОС 7.3

## Установка

Требования к окружению:
- РЕД ОС 7.3

### Главный экран
![Main Screen](./rui.png)

Убедиться что соединение с сетью интернет стабильно.

- сделать исполняемым скрипт `install.sh` командой `chmod +x install.sh`
- запустить скрипт командой `sudo ./install.sh`
- на запрос пароля для `sudo` ввести его

Если требуется поддержка HTTPS, перед установкой скопируйте crt и key файлы в папку sslcert. Имя файла должно содержать название домена и расширение.
Например, для домена yandex.ru имена файлов долдны быть yandex.ru.crt и yandex.ru.key.
Настройка HTTPS в процессе доработки

В процессе установки требуется ввод пользователя:

Если требуется выполнить установку без доступа к сети, то в диалоге
![OFFLINE?](./roffline.png)

- R7-Disk Installer "Make OFFLINE instalation?": Выбрать Да (Yes)
Если требуется выполнить установку с доступом к сети, то в диалоге
- R7-Disk Installer "Make OFFLINE instalation?": Выбрать Нет (No)

  ![Site DNS](./rsitedns.png)

- cddisk "Domain :" ввести имя домена куда устанавливается cddisk *Ok* (по-умолчанию *local.r7-office.ru*)

  ![Make HTTPS?](./rhttps.png)

Если требуется выполнить установку с доступом по протоколу HTTPS, то в диалоге
- cddisk "Make HTTPS?": Выбрать Да (Yes)
Если требуется выполнить установку с доступом по протоколу HTTP, то в диалоге
- cddisk "Make HTTPS?": Выбрать Нет (No)

Дождаться завершения установки
После успешной установки, вы должны увидеть следующее сообщение:
![Make HTTPS?](./rdone.png)

Перезагрузить компьютер

![Hosts?](./rhosts.png)

Проверьте название сайтов в файле hosts



### Подтверждение установки

После успешной установки, вы должны увидеть следующее сообщение:

Если данного сообщения нет, то скопируйте из терминала сообщения в процессе установки и сохраните в файл.
Файл загрузите на ресурс https://tmpfiles.org и отправьте 


## Контакты

Если у вас есть вопросы или предложения, пожалуйста, свяжитесь с нами через телеграм @lex_ufa.
